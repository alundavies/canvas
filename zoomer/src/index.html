<!DOCTYPE html>
<html>
<head>
    <!--meta name="viewport" content="width=device-width, initial-scale=1" -->
    <meta http-equiv="cache-control" content="max-age=0" />
    <meta http-equiv="cache-control" content="no-cache" />
    <meta http-equiv="expires" content="0" />
    <meta http-equiv="expires" content="Tue, 01 Jan 1980 1:00:00 GMT" />
    <meta http-equiv="pragma" content="no-cache" />
    <title>XYZ</title>
    <link rel="stylesheet" href="https://openlayers.org/en/v4.2.0/css/ol.css" type="text/css">
    <!-- The line below is only needed for old environments like Internet Explorer and Android 4.x -->
    <script src="https://cdn.polyfill.io/v2/polyfill.min.js?features=requestAnimationFrame,Element.prototype.classList,URL"></script>
    <script src="https://openlayers.org/en/v4.2.0/build/ol.js"></script>
    <style>
        body {
            background-color: black;
            margin: 0;
        }

        .map{
            width: 100%;
            height: 100vh;
            posistion: relative;
        }
    </style>
</head>
<body>
<div id="map" class="map"></div>
<script>

    var mapEdge = 1;
    var tileSize = 256;
    var maxZoom = 50;

    var projection = new ol.proj.Projection({
        code: 'ZOOMIFY',
        units: 'pixels',
        extent: [0, 0, mapEdge, mapEdge]
    });
    var projectionExtent = projection.getExtent();

    var maxResolution = ol.extent.getWidth(projectionExtent) / tileSize;
    var resolutions = [];
    for (var z = 0; z <= maxZoom; z++) {
        resolutions[z] = maxResolution / Math.pow(2, z);
    }

    var bigSpaceSource = new ol.source.TileImage({
        tileUrlFunction: function(tileCoord, pixelRatio, projection) {

            var z = tileCoord[0];
            var x = tileCoord[1];
            var y = -tileCoord[2]-1;
            var uri = '/openlayers/sample/' + z + '/' + x + '/' + y + '.png';
            console.log( 'Requesting '+uri)
            return uri;
        },
        projection: projection,
        tileGrid: new ol.tilegrid.TileGrid({
            origin: ol.extent.getTopLeft(projectionExtent),
            resolutions: resolutions,
            tileSize: tileSize
        }),
    });

    var view = new ol.View({
        projection: projection,
        center: [mapEdge / 2, mapEdge / 2],
        //center: [0.5,0.5],
        minZoom: 0,
      //  maxZoom: maxZoom,
        extent: projectionExtent
    });

    view.fit( [0,0,mapEdge,mapEdge]);

    var layers = [
        new ol.layer.Tile({ source: bigSpaceSource, extent: projectionExtent}),
        new ol.layer.Tile({
            source: new ol.source.TileDebug({
                projection: projection,
                tileGrid: bigSpaceSource.getTileGrid()
            })
        })
    ];

    var map = new ol.Map({
        target: 'map',
        loadTilesWhileAnimating: true,   // careful of performance on some devices
        loadTilesWhileInteracting: true, // careful of performance on some devices
        layers: layers,
        controls: ol.control.defaults().extend([
            new ol.control.FullScreen()
        ]),
        view: view
    });

    map.on('click', function(e) {
        console.log(e.coordinate);
    });

</script>
</body>
</html>